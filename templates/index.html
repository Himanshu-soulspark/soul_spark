<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Conceptra</title> <!-- Main app title kept -->

    <!-- Google Fonts (Combined from both apps) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <!-- AI App specific fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- External Libraries CSS (Combined from both apps) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- AI App specific CSS library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">

    <!-- Your Custom CSS Files (Both included) -->
    <link rel="stylesheet" href="New File.css"> <!-- Main App CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"> <!-- AI App CSS -->

    <!-- MathJax Configuration (From AI App) -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['[math]', '[/math]']],
          displayMath: [['[dmath]', '[/dmath]']]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>

    <!-- ======================================================= -->
    <!-- Main App Existing HTML Structures (Pages) -->
    <!-- ======================================================= -->

    <div id="splash-screen" class="page active no-transition">
        <!-- Content will be rendered by JS: initApp() -->
    </div>

    <!-- <<<--- ‡§¨‡§¶‡§≤‡§æ‡§µ: login-screen ‡§ï‡§æ ‡§∏‡•ç‡§ü‡•ç‡§∞‡§ï‡•ç‡§ö‡§∞ ‡§Ö‡§¨ JS ‡§∏‡•á ‡§Æ‡•à‡§®‡•á‡§ú ‡§π‡•ã‡§ó‡§æ ---<<< -->
    <div id="login-screen" class="page">
        <!-- Content will be rendered by JS: initApp() to handle login/signup -->
    </div>

    <div id="home-screen" class="page">
        <!-- Content will be rendered by JS: initApp() -->
    </div>
    <div id="sticky-note-screen" class="page">
        <!-- Content will be rendered by JS: initApp() -->
    </div>
    <div id="countdown-screen" class="page">
        <!-- Content will be rendered by JS -->
    </div>
    <div id="self-quiz-screen" class="page">
        <!-- Content will be rendered by JS -->
    </div>
    <div id="study-planner-screen" class="page">
        <!-- Content will be rendered by JS: initApp() -->
    </div>
    <div id="self-progress-screen" class="page">
        <!-- Content will be rendered by JS: initApp() -->
    </div>

    <div id="flashcard-screen" class="page">
        <header class="app-header">
            <div class="header-icon" onclick="showScreen('home-screen', true)"><i class="fa-solid fa-arrow-left"></i></div>
            <h1 class="app-title" style="color: var(--flash-text-primary); -webkit-text-fill-color: var(--flash-text-primary);">
                <i class="fa-solid fa-layer-group"></i> Flashcards
            </h1>
            <div class="header-icon"></div>
        </header>
        <main class="main-content">
            <!-- Screen 1: Deck Hub -->
            <div id="deckHubScreen" class="flash-sub-screen active">
                <div class="screen-header"><h1>Flashcard Decks</h1></div>
                <div id="deckGrid">
                    <!-- Deck cards will be rendered here by JS -->
                </div>
            </div>

            <!-- Screen 2: Deck View (where you see cards) -->
            <div id="deckViewScreen" class="flash-sub-screen">
                <div class="screen-header">
                    <button class="back-btn" id="backToDecksBtn">‚Üê</button>
                    <h1 id="deckNameHeader">Deck Name</h1>
                </div>
                <div class="add-card-section">
                    <h2>+ Add New Flashcard</h2>
                    <div class="input-group">
                        <label for="questionInput">Question</label>
                        <textarea id="questionInput" class="input-field" rows="2" placeholder="e.g., What is the powerhouse of the cell?"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="answerInput">Answer</label>
                        <textarea id="answerInput" class="input-field" rows="2" placeholder="e.g., Mitochondria"></textarea>
                    </div>
                    <button id="addFlashcardBtn" class="btn btn-primary" style="width: 100%;" disabled>Add Flashcard</button>
                </div>

                <!-- Flashcard Viewer with Navigation -->
                <div class="flashcard-viewer">
                    <div class="flashcard-nav">
                        <button id="prevCardBtn" class="nav-arrow"><i class="fa-solid fa-chevron-left"></i></button>
                        <div id="flashcardContainer" class="flashcard-container">
                            <!-- Flashcard will be rendered here by JS -->
                        </div>
                        <button id="nextCardBtn" class="nav-arrow"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                    <div id="cardActions" class="card-actions">
                        <!-- "Show Answer" button will be rendered here by JS initially -->
                    </div>
                </div>
            </div>

            <!-- Screen 3: Performance Tracker -->
            <div id="performanceScreen" class="flash-sub-screen">
                <div class="screen-header"><h1>Performance Tracker</h1></div>
                <div class="performance-grid">
                    <div class="stat-card"><div class="label">Total Cards</div><div id="totalCardsStat" class="value">0</div></div>
                    <div class="stat-card"><div class="label">Study Streak</div><div id="studyStreakStat" class="value"><span class="flame">üî•</span> 0</div></div>
                </div>
                <div class="chart-container">
                    <div id="donutChart" class="donut-chart"></div>
                    <div class="chart-center"><div id="chartTotal" class="chart-total">0</div><div class="chart-label">Mastered</div></div>
                </div>
                <div class="card-list-section">
                    <h3>All Cards</h3>
                    <input type="text" id="searchInput" class="input-field search-bar" placeholder="Search cards by keyword...">
                    <div id="cardListContainer">
                        <!-- Card list will be rendered here by JS -->
                    </div>
                </div>
            </div>

            <!-- Screen 4: How to Run -->
            <div id="howToRunScreen" class="flash-sub-screen">
                <div class="screen-header"><h1>How to Use Conceptra</h1></div>
                <div class="how-to-run-content">
                    <!-- Content can remain or be removed -->
                </div>
            </div>
        </main>
        <nav class="bottom-nav">
            <button class="nav-btn active" data-screen="deckHubScreen"><span class="icon">üóÇÔ∏è</span> Decks</button>
        </nav>
    </div>

    <div id="watch-video-screen" class="page">
        <!-- Content will be rendered by JS: initApp() -->
    </div>

    <!-- ‚úÖ‚úÖ‚úÖ --- START OF AI APP INTEGRATION --- ‚úÖ‚úÖ‚úÖ -->
    <!-- AI Features UI ‡§ï‡•ã ‡§Ö‡§¨ ‡§è‡§ï ‡§®‡§è 'page' div ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§∞‡§ñ‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à -->
    <div id="ai-tools-page" class="page">
        <!-- AI App ‡§ï‡§æ Welcome Screen ‡§Ø‡§π‡§æ‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à,
             Main App ‡§ï‡§æ initApp() ‡§î‡§∞ splash screen ‡§á‡§∏‡§ï‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∞‡§ñ‡•á‡§ó‡§æ‡•§
             AI App ‡§ï‡§æ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü 'app-container' ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§π‡•à‡•§ -->

        <!-- AI App Container (Originally hidden, now part of AI Page) -->
        <!-- style="display: none;" AI app ‡§ï‡•á JS ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ handle ‡§π‡•ã‡§ó‡§æ,
             ‡§Ø‡§æ ‡§á‡§∏‡•á Main app ‡§ï‡•á showScreen() logic ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ control ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§
             ‡§´‡§ø‡§≤‡§π‡§æ‡§≤ original AI app structure maintain ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ -->
        <div class="app-container" style="display: none;">
            <!-- 1. AI Home Screen (Previously ID 'home-screen', now 'ai-home-screen') -->
            <div id="ai-home-screen" class="screen active"> <!-- ID ‡§¨‡§¶‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à -->
                <div class="header"><button class="back-button" onclick="showScreen('home-screen', true)">‚Üê Main Dashboard</button><h1>Conceptra AI Dashboard</h1></div> <!-- Back button Main Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="feature-grid">
                    <!-- AI Features ‡§ï‡•á onclick handlers ‡§ï‡•ã update ‡§ï‡§∞‡§®‡§æ ‡§™‡•ú ‡§∏‡§ï‡§§‡§æ ‡§π‡•à
                         ‡§Ö‡§ó‡§∞ ‡§µ‡•ã navigateTo function ‡§ï‡§æ ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§
                         ‡§Ö‡§≠‡•Ä HTML ‡§Æ‡•á‡§Ç navigateTo ‡§π‡•Ä ‡§∞‡§ñ‡§æ ‡§π‡•à, JS merge ‡§Æ‡•á‡§Ç ‡§á‡§∏‡•á showScreen ‡§∏‡•á ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§ -->
                    <div class="card" onclick="navigateTo('ask-doubt-screen')"><div class="card-icon">‚ùì</div><h3>Ask Doubt</h3></div>
                    <div class="card" onclick="navigateTo('generate-notes-screen')"><div class="card-icon">‚ú®</div><h3>Generate Notes</h3></div>
                    <div class="card" onclick="navigateTo('practice-mcq-screen')"><div class="card-icon">üéØ</div><h3>Practice MCQs</h3></div>
                    <div class="card" onclick="navigateTo('solved-notes-screen')"><div class="card-icon">üìù</div><h3>Solved Examples</h3></div>
                    <div class="card" onclick="navigateTo('career-counselor-screen')"><div class="card-icon">üéì</div><h3>Career Counselor</h3></div>
                    <div class="card" onclick="navigateTo('study-planner-screen')"><div class="card-icon">üóìÔ∏è</div><h3>Study Planner</h3></div>
                    <div class="card" onclick="navigateTo('flashcard-screen')"><div class="card-icon">üß†</div><h3>Flashcards</h3></div>
                    <div class="card" onclick="navigateTo('essay-writer-screen')"><div class="card-icon">‚úçÔ∏è</div><h3>Essay Writer</h3></div>
                    <div class="card" onclick="navigateTo('presentation-maker-screen')"><div class="card-icon">üé§</div><h3>Presentation Maker</h3></div>
                    <div class="card" onclick="navigateTo('concept-explainer-screen')"><div class="card-icon">üí°</div><h3>Concept Explainer</h3></div>
                </div>
            </div>

            <!-- Other AI Feature Screens (IDs checked, seem unique) -->

            <!-- Ask Doubt Screen -->
            <div id="ask-doubt-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>Ask a Doubt</h1></div>
                <div>
                    <textarea id="doubt-input" class="textarea-box" rows="4" placeholder="Agar photo mein sawaal hai, toh yahan bas 'Solve this' likh dein."></textarea>
                    <label for="doubt-image-input" class="submit-button upload-btn">üì∑ Upload Question Image</label>
                    <input type="file" id="doubt-image-input" accept="image/*" style="display: none;">
                    <span id="file-name-display"></span>
                    <button id="ask-doubt-submit" type="button" class="submit-button">Get Answer</button>
                </div>
                <div id="ai-response-container" class="response-container"><h3>AI's Answer:</h3><div id="ai-response" class="ai-generated-content"></div></div>
            </div>

            <!-- Generate Notes Screen -->
            <div id="generate-notes-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>Generate Notes</h1></div>
                <div>
                    <input id="notes-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Photosynthesis'">
                    <div class="option-selector-group">
                        <label><input type="radio" name="note-length" value="short"> Short</label>
                        <label><input type="radio" name="note-length" value="long" checked> Long</label>
                    </div>
                    <button id="generate-notes-submit" type="button" class="submit-button">Generate</button>
                </div>
                <div id="notes-output-container" class="response-container"><h3>Generated Notes:</h3><div id="notes-response" class="ai-generated-content"></div></div>
            </div>

            <!-- Practice MCQ Screen -->
            <div id="practice-mcq-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>Practice MCQs</h1></div>
                <div id="mcq-setup-view">
                    <p>Kis topic par quiz chahiye?</p>
                    <input id="mcq-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Solar System'">
                    <p>Kitne sawaal chahiye? (Max: 50)</p>
                    <div class="option-selector-group">
                        <label><input type="radio" name="mcq-count" value="10" checked> 10</label>
                        <label><input type="radio" name="mcq-count" value="20"> 20</label>
                        <label><input type="radio" name="mcq-count" value="30"> 30</label>
                        <label><input type="radio" name="mcq-count" value="custom"> Custom:</label>
                        <input type="number" id="mcq-custom-count" class="custom-count-input" min="1" max="50" value="10" disabled>
                    </div>
                    <button id="start-quiz-btn" type="button" class="submit-button">Start Quiz</button>
                </div>
                <div id="mcq-quiz-view" style="display: none;">
                    <h2 id="quiz-topic-title"></h2>
                    <div id="quiz-container"></div>
                    <button id="submit-quiz-btn" class="submit-button" style="margin-top: 20px;">Submit Quiz</button>
                    <div id="quiz-result"></div>
                    <div id="quiz-analysis-report" class="ai-generated-content" style="margin-top: 20px; text-align: left;"></div>
                    <div id="post-quiz-options" style="display: none; margin-top: 20px;">
                         <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                        <button id="retake-quiz-btn" class="submit-button secondary">Take Another Quiz</button>
                        <button onclick="navigateTo('ai-home-screen')" class="submit-button" style="margin-top: 10px;">Go to Dashboard</button> <!-- Update onclick -->
                    </div>
                </div>
            </div>

            <!-- Solved Notes Screen -->
            <div id="solved-notes-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>Solved Notes & Examples</h1></div>
                <div>
                    <input id="solved-notes-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Projectile Motion Problems'">
                    <p>Kitne examples chahiye? (Max: 50)</p>
                    <div class="option-selector-group">
                        <label><input type="radio" name="solved-notes-count" value="3" checked> 3</label>
                        <label><input type="radio" name="solved-notes-count" value="5"> 5</label>
                        <label><input type="radio" name="solved-notes-count" value="10"> 10</label>
                        <label><input type="radio" name="solved-notes-count" value="custom"> Custom:</label>
                        <input type="number" id="solved-notes-custom-count" class="custom-count-input" min="1" max="50" value="3" disabled>
                    </div>
                    <button id="get-solved-notes-btn" type="button" class="submit-button">Get Solved Examples</button>
                </div>
                <div id="solved-notes-response-container" class="response-container"><h3>Solved Examples:</h3><div id="solved-notes-response" class="ai-generated-content"></div></div>
            </div>

            <!-- Career Counselor Screen -->
            <div id="career-counselor-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>AI Career Counselor</h1></div>
                <div>
                    <textarea id="career-interests-input" class="textarea-box" rows="4" placeholder="Apni ruchi (interests) aur pasandida subjects likhein. Jaise: 'Mujhe Science aur Computers mein interest hai. Math achha lagta hai.'"></textarea>
                    <button id="get-career-advice-btn" type="button" class="submit-button">Get Career Advice</button>
                </div>
                <div id="career-response-container" class="response-container">
                    <h3>Career Roadmap:</h3>
                    <div id="career-paginated-content" class="paginated-content-area"></div>
                    <div id="career-pagination-controls" class="pagination-controls"></div>
                </div>
            </div>

            <!-- Study Planner Screen (Note: Main app also has study-planner-screen ID, needs careful handling in JS) -->
            <!-- HTML ID "study-planner-screen" here seems redundant given Main app already has it.
                 Assuming the AI app version is the one used *within* the AI section,
                 its ID should ideally be changed to prevent conflict with the Main app's page ID.
                 Let's rename this one to 'ai-study-planner-screen' to be safe. -->
            <div id="ai-study-planner-screen" class="screen"> <!-- ID ‡§¨‡§¶‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à -->
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>Personalized Study Planner</h1></div>
                <div>
                    <textarea id="study-plan-details-input" class="textarea-box" rows="4" placeholder="Apne subjects aur goal likhein. Jaise: 'Subjects: Physics, Chemistry, Math. Agle mahine final exams hain. Mujhe ek hafte ka plan chahiye.'"></textarea>
                    <button id="generate-study-plan-btn" type="button" class="submit-button">Create My Plan</button>
                </div>
                <div id="study-plan-response-container" class="response-container">
                    <h3>Your Study Plan:</h3>
                    <div id="study-plan-paginated-content" class="paginated-content-area"></div>
                    <div id="study-plan-pagination-controls" class="pagination-controls"></div>
                </div>
            </div>

            <!-- Flashcard Screen (Note: Main app also has flashcard-screen ID, needs careful handling in JS) -->
            <!-- HTML ID "flashcard-screen" here seems redundant given Main app already has it.
                 Assuming the AI app version is the one used *within* the AI section,
                 its ID should ideally be changed to prevent conflict with the Main app's page ID.
                 Let's rename this one to 'ai-flashcard-screen' to be safe. -->
            <div id="ai-flashcard-screen" class="screen"> <!-- ID ‡§¨‡§¶‡§≤‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à -->
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>AI Flashcards</h1></div>
                <div>
                    <input id="flashcard-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Human Heart'">
                     <p>Kitne flashcards chahiye? (Max: 50)</p>
                    <div class="option-selector-group">
                        <label><input type="radio" name="flashcard-count" value="10" checked> 10</label>
                        <label><input type="radio" name="flashcard-count" value="20"> 20</label>
                        <label><input type="radio" name="flashcard-count" value="30"> 30</label>
                        <label><input type="radio" name="flashcard-count" value="custom"> Custom:</label>
                        <input type="number" id="flashcard-custom-count" class="custom-count-input" min="1" max="50" value="10" disabled>
                    </div>
                    <button id="generate-flashcards-btn" type="button" class="submit-button">Create Flashcards</button>
                </div>
                <div id="flashcard-response-container" class="response-container"></div>
            </div>

            <!-- Essay Writer Screen -->
            <div id="essay-writer-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>AI Essay Writer</h1></div>
                <div>
                    <input id="essay-topic-input" type="text" class="input-box" placeholder="Aapko kis topic par essay chahiye?">
                    <button id="write-essay-btn" type="button" class="submit-button">Write Essay</button>
                </div>
                <div id="essay-writer-response-container" class="response-container">
                    <h3>AI Generated Essay:</h3>
                    <div id="essay-writer-response" class="ai-generated-content"></div>
                </div>
            </div>

            <!-- Presentation Maker Screen -->
            <div id="presentation-maker-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>AI Presentation Maker</h1></div>
                <div>
                    <input id="presentation-topic-input" type="text" class="input-box" placeholder="Aapki presentation ka topic kya hai?">
                    <button id="create-presentation-btn" type="button" class="submit-button">Create Presentation</button>
                </div>
                <div id="presentation-maker-response-container" class="response-container">
                    <h3>AI Generated Presentation:</h3>
                    <div id="presentation-maker-response" class="ai-generated-content"></div>
                </div>
            </div>

            <!-- Concept Explainer Screen -->
            <div id="concept-explainer-screen" class="screen">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <div class="header"><button class="back-button" onclick="navigateTo('ai-home-screen')">‚Üê</button><h1>AI Concept Explainer</h1></div>
                <div>
                    <input id="concept-input" type="text" class="input-box" placeholder="Koi bhi topic likhein, jaise 'Quantum Physics'">
                    <button id="get-explanation-btn" type="button" class="submit-button">Samjhao!</button>
                </div>
                <div id="concept-output-container" class="response-container">
                    <h3>Aasan Bhasha Mein:</h3>
                    <div id="explainer-response" class="ai-generated-content"></div>
                </div>
            </div>
             <!-- Placeholder IDs from Main App's AI sections are now redundant -->
             <!-- The screens above replace the need for:
             <div id="insight-ai-screen" class="page"></div>
             <div id="ai-concept-explainer-screen" class="page"></div>
             <div id="ai-generate-notes-screen" class="page"></div>
             Let's keep the AI screens integrated directly here and remove the placeholder pages from the main app structure below.
             However, the Main App HTML *already* has these placeholder IDs defined.
             Okay, let's keep the Main App's page divs and *remove* the AI app's `app-container` wrapper, placing the individual AI screens *inside* the corresponding Main App placeholder pages. This seems like a better integration strategy if the Main App's page navigation (`showScreen`) is intended to be used.
             Let's revise this section. The AI screens will go inside the relevant existing Main App page divs.
             -->
        </div>
        <!-- AI App Container Ends -->
    </div>
    <!-- AI APP INTEGRATION - Placeholder for AI screens are now filled -->
    <!-- ‚úÖ‚úÖ‚úÖ --- END OF AI APP INTEGRATION --- ‚úÖ‚úÖ‚úÖ -->

    <!-- ======================================================= -->
    <!-- Main App Existing HTML Structures (Pages continued) -->
    <!-- ======================================================= -->

    <!-- OMR PRACTICE PAGE -->
    <div id="omr-practice-page" class="page">
        <header class="app-header">
            <div class="header-icon" onclick="showScreen('home-screen', true)"><i class="fa-solid fa-arrow-left"></i></div>
            <h1 class="app-title"><i class="fa-solid fa-list-check"></i> OMR Practice</h1>
            <div class="header-icon"></div>
        </header>
        <main class="main-content" id="omr-main-content">
            <!-- Screen 1: Splash Screen -->
            <div id="omr-splash-screen" class="screen active">
                <div class="logo">üìñ</div>
                <h1>Conceptra</h1>
                <p class="tagline">Learn Bold. Think Clear. Rise with Conceptra.</p>
                <p class="feature-name">OMR Practice</p>
                <div class="loading-bar">
                    <div class="loading-bar-inner"></div>
                </div>
            </div>

            <!-- Screen 1.5: Home Screen -->
            <div id="omr-home-screen" class="screen">
                <div class="container" style="justify-content: center; display: flex; flex-direction: column;">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDUwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGZpbGw9IiMwMEI0OUIiIGQ9Ik0yNSw1QzE2LjUsNSw5LjksMTEuMSw5LjksMTkuNGMwLDIuMSwwLjUsNC4xLDEuMyw1LjlDMTMuOCwyOS4zLDI1LDQ1LDI1LDQ1czExLjItMTUuNywxMy44LTIwLjFjMC44LTEuOCwxLjMtMy44LDEuMy01LjlDMzkuOCwxMS4xLDMzLjUsNSwyNSw1eiBNMjUsMjZjLTMuMywwLTYtMi43LTYtNnMzLjMtNiw2LTZzNiwzLjcsNiw2UzI4LjMsMjYsMjUsMjZ6Ii8+PHBhdGggZmlsbD0iIzAwQjQ5QiIgZD0iTTQyLjYsMzEuM2MtMS40LDAtMi44LDAuMi00LjEsMC43QzM4LDMyLjUsMzcuNSwzMywzNywzMy41Yy0xLjIsMS4xLTIuNywyLjQtNC40LDQuMWMtMS41LTEuNS0zLTIuOC00LjQtNC4xYy0wLjUtMC41LTEtMS0xLjYtMS40Yy0xLjQtMC41LTIuOC0wLjYtNC4xLTAuN2MtMy4xLDAtNS42LDIuNS01LjYsNS42YzAsMS4zLDAuNCwyLjYsMS4xLDMuNmMxLjMsMS44LDMsMy44LDQuOSw1LjdjMSwxLDIuMSwyLjEsMy4zLDMuMmMwLjUsMC40LDEsMC44LDEuNCwxLjJsMC4xLDAuMWwwLjEsMC4xbDAuMiwwLjFsMC4xLDAuMWwwLjEsMC4xbDAuMSwwbDAuMSwwbDAuMSwwbDAuMiwwLjFsMC4xLDAuMWwwLjEsMC4xbDAuMS0wLjJsMC4yLTAuMWwwLjEtMC4xbDAuMS0wLjFsMC4xLTAuMWwwLjItMC4xbDAuMS0wLjFjMC40LTAuNCwwLjgtMC44LDEuMy0xLjJjMS4yLTEsMi4zLTIuMSwzLjMtMy4yYzEuOS0xLjksMy42LTMuOSw0LjktNS43YzAuNy0xLDEuMS0yLjIsMS4xLTMuNkM0OC4yLDMzLjgsNDUuNywzMS4zLDQyLjYsMzEuM3oiLz48L3N2Zz4=" alt="Conceptra Logo" width="80" style="display:block; margin: -20px auto 20px auto;">
                    <h2>OMR Practice Menu</h2>
                    <button id="omr-go-to-setup" class="btn">Create New Test</button>
                    <button id="omr-go-to-history" class="btn btn-secondary">View Test History</button>
                </div>
            </div>

            <!-- Screen 2: Test Setup Screen -->
            <div id="omr-setup-screen" class="screen">
                <div class="container">
                    <h2>Create New Test</h2>
                    <form id="omr-setup-form">
                        <div class="form-group"><label for="omr-exam-name">Exam Name</label><input type="text" id="omr-exam-name" placeholder="e.g., RRB Grand Test 1" required></div>
                        <div class="form-group"><label for="omr-chapter-name">Chapter/Subject Name (Optional)</label><input type="text" id="omr-chapter-name" placeholder="e.g., Physics"></div>
                        <div class="form-group"><label for="omr-num-questions">Number of Questions</label><input type="number" id="omr-num-questions" value="20" min="1" max="300" required></div>
                        <div class="form-group"><label>Options per Question</label><div class="radio-group"><label><input type="radio" name="omr-num-options" value="4" checked> 4</label><label><input type="radio" name="omr-num-options" value="5"> 5</label></div></div>
                        <div class="form-group"><label for="omr-correct-marks">Marks for Correct Answer</label><input type="number" id="omr-correct-marks" value="1" step="any" required></div>
                        <div class="form-group"><label for="omr-negative-marks">Negative Marks for Wrong Answer</label><input type="number" id="omr-negative-marks" value="0" step="any" required></div>
                        <div class="form-group"><label>Timer Settings</label><div class="radio-group"><label><input type="radio" name="omr-timer-type" value="set" checked> Set Time</label><label><input type="radio" name="omr-timer-type" value="stopwatch"> Stopwatch</label><label><input type="radio" name="omr-timer-type" value="none"> No Time</label></div></div>
                        <div class="form-group" id="omr-set-time-container"><label>Set Time</label><div id="omr-set-time-inputs"><input type="number" id="omr-timer-hours" value="1" min="0" placeholder="HH"> <span>:</span><input type="number" id="omr-timer-minutes" value="0" min="0" max="59" placeholder="MM"> <span>:</span><input type="number" id="omr-timer-seconds" value="0" min="0" max="59" placeholder="SS"></div></div>
                        <button type="submit" class="btn">Start Practice</button>
                        <button type="button" class="btn btn-secondary" onclick="showOmrScreen('omr-home-screen')">Back to Menu</button>
                    </form>
                </div>
            </div>

            <!-- Screen 3: OMR Practice Sheet -->
            <div id="omr-practice-screen" class="screen">
                <div class="container">
                    <div class="practice-header"><h2 id="omr-practice-exam-name" style="text-align: left; margin-bottom: 0;"></h2><div id="omr-timer">00:00:00</div></div>
                    <div class="omr-sheet" id="omr-sheet-container"></div>
                    <button id="omr-submit-answers-btn" class="btn" style="margin-top: 20px;">Submit Answers</button>
                </div>
            </div>

            <!-- Screen 4: Answer Key Entry Screen -->
            <div id="omr-key-entry-screen" class="screen">
                <div class="container">
                    <h2>Generate Answer Key</h2>
                    <div class="omr-sheet" id="omr-key-sheet-container"></div>
                    <button id="omr-generate-result-btn" class="btn" style="margin-top: 20px;">Generate Result</button>
                </div>
            </div>

            <!-- Screen 5: Result Screen -->
            <div id="omr-result-screen" class="screen">
                <div class="container" id="omr-result-container-main">
                    <h2>Test Result</h2>
                    <div id="omr-result-tabs"><button class="tab-btn active" onclick="openOmrTab(event, 'omr-summary')">Summary</button><button class="tab-btn" onclick="openOmrTab(event, 'omr-detailed-analysis')">Detailed Analysis</button></div>
                    <div id="omr-summary" class="tab-content active"><table id="omr-score-board"></table><div id="omr-result-chart-container"><canvas id="omr-result-chart"></canvas></div></div>
                    <div id="omr-detailed-analysis" class="tab-content"><div style="overflow-x: auto;"><table id="omr-detailed-analysis-table"></table></div></div>
                    <button class="btn btn-secondary" onclick="showOmrScreen('omr-home-screen')">Back to Menu</button>
                </div>
            </div>

            <!-- Screen 6: History Screen -->
            <div id="omr-history-screen" class="screen">
                <div class="container">
                    <h2>Test History</h2>
                    <ul id="omr-history-list"></ul>
                    <div id="omr-performance-graph-container" style="margin-top: 20px;"><canvas id="omr-performance-chart"></canvas></div>
                    <button class="btn btn-secondary" onclick="showOmrScreen('omr-home-screen')">Back to Menu</button>
                </div>
            </div>
        </main>
    </div>

    <!-- BRAIN GAMES PAGE -->
    <div id="brain-games-page" class="page">
        <header class="app-header transparent-header">
             <div class="header-icon" onclick="showScreen('home-screen', true)"><i class="fa-solid fa-arrow-left"></i></div>
        </header>
        <main class="main-content">
            <div class="app-container">
                <!-- Screen 1: Splash Screen -->
                <div id="game-splash-screen" class="screen active">
                    <div class="splash-logo-icon"><svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M62.5 25H37.5C30.5964 25 25 30.5964 25 37.5V62.5C25 69.4036 30.5964 75 37.5 75H62.5C69.4036 75 75 69.4036 75 62.5V37.5C75 30.5964 69.4036 25 62.5 25Z" stroke="#00c2ff" stroke-width="5"/><path d="M50 43.75V56.25" stroke="#00c2ff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/><path d="M43.75 50H56.25" stroke="#00c2ff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/><path d="M62.5 43.75H62.501" stroke="#00c2ff" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/><path d="M62.5 56.25H62.501" stroke="#00c2ff" stroke-width="7" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                    <div class="splash-brand-name">Conceptra</div>
                    <div class="splash-tagline">Refresh Your Mind, Rise with Conceptra.</div>
                    <div class="loading-bar"><div class="loading-bar-inner"></div></div>
                </div>

                <!-- Screen 2: Menu Screen -->
                <div id="menu-screen" class="screen">
                     <div class="menu-patti" id="patti-clash" data-game="clash"><img class="patti-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTU3LjI1NDUgNDQuNDg4MUM1OC40MDggNDMuMjc1NSA1OS4yMDQyIDQxLjc0ODcgNTkuNTQxMyAzOS45OTQ2QzU5Ljg3ODQgMzguMjQwNSA1OS4yNDAyIDM2LjQyMTIgNTkuMTQ2MSAzNC43NDg3QzU4LjU1MiAzMy4wNzYyIDU3LjUzOTIgMzEuNjA0NyA1Ni4yNDQ1IDMwLjQ4M0M1NC45NDk4IDI5LjM2MTQgNTMuNDA0MSAyOC42MzQ2IDUxLjgyNDUgMjguMzk5MkM1MC4yNDQ4IDI4LjE2MzggNDguNjQ0MSAyOC4zMjg5IDQ3LjE5MjMgMjguODc2NEM0NS43NDAyIDI5LjQyMzggNDQuNDk4NiAzMC4zMzg0IDQzLjU5NDkgMzEuNTE4MUM0Mi42OTExIDMyLjY5NzggNDIuMTY0MSAzNC4wODgxIDQyLjA5NDMgMzUuNTU0NUw1OC40MjY1IDQxLjY0NDdMNTcuMjU0NSA0NC40ODgxWiIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNNTUuMTgxOSA1OC45NDc4QzUzLjM3MzMgNjAuMDYyOSA1MS4yNDQ3IDYwLjU3OTkgNDkuMDg4MSA2MC4zODQ0QzQ2LjkzMTYgNjAuMTg4OSA0NC45NjY4IDU5LjMwODggNDMuNDkyOSA1Ny43NzM0QzQyLjAzOTEgNTYuMjM4IDQxLjE3MjQgNTQuMTUwMyA0MC45OTM4IDUxLjkyMjhDNDAuODE1MiA0OS42OTUzIDQxLjMzMjIgNDcuNTI4NSA0Mi4zNzIzIDQ1LjY5NDdMNDQuODQ5OSA0MS4yNzk3TDU5LjA1MjIgNTUuNzIzMkw1NS4xODE5IDU4Ljk0NzhaIiBmaWxsPSJ3aGl0ZSIvPjxwYXRoIGQ9IkM0MC42OTEgNjMuNjQ0OEMzOS4yNTA4IDYzLjA1NDQgMzcuOTYyMSA2Mi4xMjY1IDM2Ljk1ODYgNjAuODc0OEMzNS45NTUyIDU5LjYyMzIgMzUuMjgxMSA1OC4wOTkyIDM1LjAxNzQgNTYuNDE3MkMzNC43NTM2IDU0LjczNDcgMzQuNzk5MyA1My4wMDk4IDM1LjE0ODcgNTEuMzc0OEMzNS40OTgyIDQ5LjczOTggMzYuMTQxMSA0OC4yMjU5IDM3LjAxNjYgNDYuOTQ3OEw0OC45ODExIDYxLjcxNThMNDAuNjkxIDYzLjY0NDhaIiBmaWxsPSJ3aGl0ZSIvPjxwYXRoIGQ9Ik02My42MTU3IDYxLjU3MjljLTYyLjQ5NCA2Mi44ODEyLTYxLjAzNzMgNjMuOTI5NS01OS4zOTQ1IDY0LjU2ODhDNTcuNzUxNyA2NS4yMDgyIDU1Ljk5NDcgNjUuNDE5MSA1NC4yMTU5IDY1LjE1MzdDNTIuNDM3MiA2NC44OTQzIDUwLjc0NDkgNjQuMTgxOCA0OS4zNDA5IDYzLjA4NzhMNTIuNTQ0NyA2MS41NzI5WiIgZmlsbD0id2hpdGUiLz48L3N2Zz4=" alt="Color Clash Icon"><div class="patti-text"><h3>Colour Clash</h3></div></div>
                    <div class="menu-patti" id="patti-pulse" data-game="pulse"><img class="patti-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI1IDUwSDM1TDM5LjU4MzMgNjIuNUw0NS44MzMzIDMwTDQ4LjczOTYgNTBINTYuMjVMODAuMjA4MyA1MEw4My4zMzMzIDUwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==" alt="Pulse Icon"><div class="patti-text"><h3>Pattern Pulse</h3></div></div>
                    <div class="menu-patti" id="patti-shift" data-game="shift"><img class="patti-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGg dD0iTTUwIDI1TDYyLjUgNDMuNzVWMjVINTBaIiBmaWxsPSJ3aGl0ZSIvPjxwYXRoIGQ9Ik01MCAyNUwzNy41IDQzLjc1VjI1SDUwWiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC43Ii8+PHBhdGggZD0iTTUwIDc1TDYyLjUgNTYuMjV2MTguNzVINTBaIiBmaWxsPSJ3aGl0ZSIvPjxwYXRoIGQ9Ik01MCA3NUwzNy41IDU2LjI1Vjc1SDUwWiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC43Ii8+PHBhdGggZD0iTTc1IDUwTDQzLjc1IDM3LjVWNjIuNUw3NSA1MFoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNyIvPjxwYXRoIGQ9Ik0yNSA1MEw1Ni4yNSA2Mi41VjM3LjVMMjUgNTBaIiBmaWxsPSJ3aGl0ZSIvPjwvc3ZnPg==" alt="Shift Icon"><div class="patti-text"><h3>Shape Shifting</h3></div></div>
                    <div class="menu-patti" id="patti-math" data-game="math"><img class="patti-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUwLjAwMDEgNzVWMzMuMzMzM0w2OC43NTAxIDUwTDQzLjc1MDEgMjVWMzMuMzMzM0w1Ni4yNTAxIDQzLjc1IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==" alt="Math Icon"><div class="patti-text"><h3>Math Rush</h3></div></div>
                    <div class="menu-patti" id="patti-spatial" data-game="spatial"><img class="patti-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMjUiIGZpbGw9IndoaXRlIi8+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMzcuNSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuNSIgc3Ryb2tlLXdpZHRoPSI1Ii8+PHBhdGg dD0iTTc5LjA1MjUgNjIuNUc3NS44NjM4IDY4LjE2NjcgNzAuMDMxMiA3Mi41IDYzLjE4MjkgNzQuMzE4OEM1Ni4zMzQ2IDc2LjEzNjggNDkuMTMzMyA3NS4zMTg4IDQzLjA3OTkgNzIuMDQ3NUMzNy4wMjY0IDY4Ljc3NjMgMzIuNTQ0NyA2My4yNTI1IDMwLjQ4OTEgNTYuNzQ3OEMyOC40MzM2IDUwLjI0MzIgMjguOTIzMyA0My4yNTg3IDMxLjg4NDQgMzcuMjQzNSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLW9wYWNpdHk9IjAuNSIgc3Ryb2tlLXdpZHRoPSI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=" alt="Spatial Icon"><div class="patti-text"><h3>Spatial Spin</h3></div></div>
                </div>

                <!-- Screen 3: Individual Game Screens with new layout -->
                <div id="clash-game-screen" class="screen game-screen">
                    <div class="game-screen-header"><button class="back-btn"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></button><h2>Color Clash</h2></div>
                    <p class="description">Select the color of the text, not the word it spells.</p>
                    <div class="game-area"><div id="clash-word">READY</div><div id="clash-options"></div></div>
                    <div class="game-footer"><div class="game-score" id="clash-score">Score: 0</div></div>
                </div>

                <div id="pulse-game-screen" class="screen game-screen">
                     <div class="game-screen-header"><button class="back-btn"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></button><h2>Pattern Pulse</h2></div>
                    <p class="description">Memorize the glowing sequence and repeat it.</p>
                    <div class="game-area"><div id="pulse-grid"></div></div>
                    <div class="game-footer"><div class="game-score" id="pulse-score">Level: 0</div></div>
                </div>

                <div id="shift-game-screen" class="screen game-screen">
                     <div class="game-screen-header"><button class="back-btn"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></button><h2>Shape Shifting</h2></div>
                    <p class="description">Are the two shapes identical or different?</p>
                    <div class="game-area"><div id="shift-container"><div id="shape1"></div><div id="shape2"></div></div><div id="shift-options"><button class="shift-btn" id="shape-same-btn">Same</button><button class="shift-btn" id="shape-different-btn">Different</button></div></div>
                    <div class="game-footer"><div class="game-score" id="shift-score">Score: 0</div></div>
                </div>

                <div id="math-game-screen" class="screen game-screen">
                     <div class="game-screen-header"><button class="back-btn"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></button><h2>Math Rush</h2></div>
                    <p class="description">Solve the simple equation as quickly as you can.</p>
                    <div class="game-area"><div id="math-question"></div><div id="math-options"></div></div>
                    <div class="game-footer"><div class="game-score" id="math-score">Score: 0</div></div>
                </div>

                <div id="spatial-game-screen" class="screen game-screen">
                     <div class="game-screen-header"><button class="back-btn"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></button><h2>Spatial Spin</h2></div>
                    <p class="description">Find the rotated version of the shape above.</p>
                    <div class="game-area"><div id="spatial-base-shape"></div><div id="spatial-options"></div></div>
                    <div class="game-footer"><div class="game-score" id="spatial-score">Score: 0</div></div>
                </div>
            </div>
        </main>
    </div>

    <!-- COMPETITIVE EXAM & TEACHER PAGES -->
    <div id="competitive-exam-page" class="page">
        <!-- Content will be rendered by JS -->
    </div>
    <div id="teacher-list-page" class="page">
        <!-- Content will be rendered by JS -->
    </div>
    <div id="teacher-content-page" class="page">
        <!-- Content will be rendered by JS -->
    </div>
    <div id="exam-quiz-page" class="page">
        <!-- Content will be rendered by JS -->
    </div>
    <div id="exam-result-page" class="page">
        <!-- Content will be rendered by JS -->
    </div>

    <!-- NEW PAGES FOR FEEDBACK & AI TEST CREATION -->
    <div id="feedback-page" class="page">
        <!-- Content will be rendered by JS -->
    </div>
    <div id="create-test-page" class="page">
        <!-- Content will be rendered by JS -->
    </div>

    <div id="comments-screen" class="page">
        <!-- Content will be rendered by JS -->
    </div>


    <!-- Side Menu and Overlays -->
    <div id="side-menu">
        <!-- Content will be rendered by JS: initApp() -->
    </div>
    <div id="menu-overlay" class="hidden" onclick="toggleMenu()"></div>

    <div id="settings-panel">
        <!-- Content will be rendered by JS: initApp() -->
    </div>
    <div id="settings-overlay" class="hidden" onclick="closeSettingsModal()"></div>

    <!-- Modals -->
    <div id="safety-modal" class="modal-overlay">
        <!-- Content will be rendered by JS: initApp() -->
    </div>
    <div id="event-settings-modal" class="modal-overlay">
        <!-- Content will be rendered by JS -->
    </div>

    <!-- ======================================================= -->
    <!-- AI App Specific HTML Structures (Integrated) -->
    <!-- ======================================================= -->
    <!-- These are the individual AI screens, moved here. -->
    <!-- They will be managed by the main app's showScreen/page logic -->

    <!-- AI Home Screen (Previously inside app-container, now a direct page) -->
    <!-- **IMPORTANT**: Renamed from 'home-screen' to 'ai-home-screen' to avoid clash -->
     <div id="ai-home-screen" class="page">
        <div class="header"><button class="back-button" onclick="showScreen('home-screen', true)">‚Üê Main Dashboard</button><h1>Conceptra AI Dashboard</h1></div>
        <div class="feature-grid">
             <!-- onclick handlers here should ideally call showScreen() in the Main App -->
             <!-- Temporarily keeping navigateTo, requires update in JS merge -->
            <div class="card" onclick="navigateTo('ask-doubt-page')"><div class="card-icon">‚ùì</div><h3>Ask Doubt</h3></div>
            <div class="card" onclick="navigateTo('generate-notes-page')"><div class="card-icon">‚ú®</div><h3>Generate Notes</h3></div>
            <div class="card" onclick="navigateTo('practice-mcq-page')"><div class="card-icon">üéØ</div><h3>Practice MCQs</h3></div>
            <div class="card" onclick="navigateTo('solved-notes-page')"><div class="card-icon">üìù</div><h3>Solved Examples</h3></div>
            <div class="card" onclick="navigateTo('career-counselor-page')"><div class="card-icon">üéì</div><h3>Career Counselor</h3></div>
            <div class="card" onclick="navigateTo('ai-study-planner-page')"><div class="card-icon">üóìÔ∏è</div><h3>Study Planner</h3></div> <!-- Updated ID -->
            <div class="card" onclick="navigateTo('ai-flashcard-page')"><div class="card-icon">üß†</div><h3>Flashcards</h3></div> <!-- Updated ID -->
            <div class="card" onclick="navigateTo('essay-writer-page')"><div class="card-icon">‚úçÔ∏è</div><h3>Essay Writer</h3></div>
            <div class="card" onclick="navigateTo('presentation-maker-page')"><div class="card-icon">üé§</div><h3>Presentation Maker</h3></div>
            <div class="card" onclick="navigateTo('concept-explainer-page')"><div class="card-icon">üí°</div><h3>Concept Explainer</h3></div>
        </div>
    </div>

    <!-- Individual AI Feature Pages -->
    <!-- Each screen from the AI app is now a separate 'page' in the main app structure -->

    <div id="ask-doubt-page" class="page"> <!-- Renamed from -screen to -page for consistency -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>Ask a Doubt</h1></div> <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
        <div>
            <textarea id="doubt-input" class="textarea-box" rows="4" placeholder="Agar photo mein sawaal hai, toh yahan bas 'Solve this' likh dein."></textarea>
            <label for="doubt-image-input" class="submit-button upload-btn">üì∑ Upload Question Image</label>
            <input type="file" id="doubt-image-input" accept="image/*" style="display: none;">
            <span id="file-name-display"></span>
            <button id="ask-doubt-submit" type="button" class="submit-button">Get Answer</button>
        </div>
        <div id="ai-response-container" class="response-container"><h3>AI's Answer:</h3><div id="ai-response" class="ai-generated-content"></div></div>
    </div>

    <div id="generate-notes-page" class="page"> <!-- Renamed from -screen to -page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>Generate Notes</h1></div>
        <div>
            <input id="notes-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Photosynthesis'">
            <div class="option-selector-group">
                <label><input type="radio" name="note-length" value="short"> Short</label>
                <label><input type="radio" name="note-length" value="long" checked> Long</label>
            </div>
            <button id="generate-notes-submit" type="button" class="submit-button">Generate</button>
        </div>
        <div id="notes-output-container" class="response-container"><h3>Generated Notes:</h3><div id="notes-response" class="ai-generated-content"></div></div>
    </div>

    <div id="practice-mcq-page" class="page"> <!-- Renamed from -screen to -page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>Practice MCQs</h1></div>
        <div id="mcq-setup-view">
            <p>Kis topic par quiz chahiye?</p>
            <input id="mcq-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Solar System'">
            <p>Kitne sawaal chahiye? (Max: 50)</p>
            <div class="option-selector-group">
                <label><input type="radio" name="mcq-count" value="10" checked> 10</label>
                <label><input type="radio" name="mcq-count" value="20"> 20</label>
                <label><input type="radio" name="mcq-count" value="30"> 30</label>
                <label><input type="radio" name="mcq-count" value="custom"> Custom:</label>
                <input type="number" id="mcq-custom-count" class="custom-count-input" min="1" max="50" value="10" disabled>
            </div>
            <button id="start-quiz-btn" type="button" class="submit-button">Start Quiz</button>
        </div>
        <div id="mcq-quiz-view" style="display: none;">
            <h2 id="quiz-topic-title"></h2>
            <div id="quiz-container"></div>
            <button id="submit-quiz-btn" class="submit-button" style="margin-top: 20px;">Submit Quiz</button>
            <div id="quiz-result"></div>
            <div id="quiz-analysis-report" class="ai-generated-content" style="margin-top: 20px; text-align: left;"></div>
            <div id="post-quiz-options" style="display: none; margin-top: 20px;">
                 <!-- Back button AI Home Screen ‡§™‡§∞ ‡§ú‡§æ‡§è‡§ó‡§æ -->
                <button id="retake-quiz-btn" class="submit-button secondary">Take Another Quiz</button>
                <button onclick="showScreen('ai-home-screen')" class="submit-button" style="margin-top: 10px;">Go to Dashboard</button> <!-- Update onclick -->
            </div>
        </div>
    </div>

    <div id="solved-notes-page" class="page"> <!-- Renamed from -screen to -page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>Solved Notes & Examples</h1></div>
        <div>
            <input id="solved-notes-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Projectile Motion Problems'">
            <p>Kitne examples chahiye? (Max: 50)</p>
            <div class="option-selector-group">
                <label><input type="radio" name="solved-notes-count" value="3" checked> 3</label>
                <label><input type="radio" name="solved-notes-count" value="5"> 5</label>
                <label><input type="radio" name="solved-notes-count" value="10"> 10</label>
                <label><input type="radio" name="solved-notes-count" value="custom"> Custom:</label>
                <input type="number" id="solved-notes-custom-count" class="custom-count-input" min="1" max="50" value="3" disabled>
            </div>
            <button id="get-solved-notes-btn" type="button" class="submit-button">Get Solved Examples</button>
        </div>
        <div id="solved-notes-response-container" class="response-container"><h3>Solved Examples:</h3><div id="solved-notes-response" class="ai-generated-content"></div></div>
    </div>

    <div id="career-counselor-page" class="page"> <!-- Renamed from -screen to -page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>AI Career Counselor</h1></div>
        <div>
            <textarea id="career-interests-input" class="textarea-box" rows="4" placeholder="Apni ruchi (interests) aur pasandida subjects likhein. Jaise: 'Mujhe Science aur Computers mein interest hai. Math achha lagta hai.'"></textarea>
            <button id="get-career-advice-btn" type="button" class="submit-button">Get Career Advice</button>
        </div>
        <div id="career-response-container" class="response-container">
            <h3>Career Roadmap:</h3>
            <div id="career-paginated-content" class="paginated-content-area"></div>
            <div id="career-pagination-controls" class="pagination-controls"></div>
        </div>
    </div>

    <div id="ai-study-planner-page" class="page"> <!-- Renamed from study-planner-screen to ai-study-planner-page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>Personalized Study Planner</h1></div>
        <div>
            <textarea id="study-plan-details-input" class="textarea-box" rows="4" placeholder="Apne subjects aur goal likhein. Jaise: 'Subjects: Physics, Chemistry, Math. Agle mahine final exams hain. Mujhe ek hafte ka plan chahiye.'"></textarea>
            <button id="generate-study-plan-btn" type="button" class="submit-button">Create My Plan</button>
        </div>
        <div id="study-plan-response-container" class="response-container">
            <h3>Your Study Plan:</h3>
            <div id="study-plan-paginated-content" class="paginated-content-area"></div>
            <div id="study-plan-pagination-controls" class="pagination-controls"></div>
        </div>
    </div>

    <div id="ai-flashcard-page" class="page"> <!-- Renamed from flashcard-screen to ai-flashcard-page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>AI Flashcards</h1></div>
        <div>
            <input id="flashcard-topic-input" type="text" class="input-box" placeholder="Topic likhein, jaise 'Human Heart'">
             <p>Kitne flashcards chahiye? (Max: 50)</p>
            <div class="option-selector-group">
                <label><input type="radio" name="flashcard-count" value="10" checked> 10</label>
                <label><input type="radio" name="flashcard-count" value="20"> 20</label>
                <label><input type="radio" name="flashcard-count" value="30"> 30</label>
                <label><input type="radio" name="flashcard-count" value="custom"> Custom:</label>
                <input type="number" id="flashcard-custom-count" class="custom-count-input" min="1" max="50" value="10" disabled>
            </div>
            <button id="generate-flashcards-btn" type="button" class="submit-button">Create Flashcards</button>
        </div>
        <div id="flashcard-response-container" class="response-container"></div>
    </div>

    <div id="essay-writer-page" class="page"> <!-- Renamed from -screen to -page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>AI Essay Writer</h1></div>
        <div>
            <input id="essay-topic-input" type="text" class="input-box" placeholder="Aapko kis topic par essay chahiye?">
            <button id="write-essay-btn" type="button" class="submit-button">Write Essay</button>
        </div>
        <div id="essay-writer-response-container" class="response-container">
            <h3>AI Generated Essay:</h3>
            <div id="essay-writer-response" class="ai-generated-content"></div>
        </div>
    </div>

    <div id="presentation-maker-page" class="page"> <!-- Renamed from -screen to -page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>AI Presentation Maker</h1></div>
        <div>
            <input id="presentation-topic-input" type="text" class="input-box" placeholder="Aapki presentation ka topic kya hai?">
            <button id="create-presentation-btn" type="button" class="submit-button">Create Presentation</button>
        </div>
        <div id="presentation-maker-response-container" class="response-container">
            <h3>AI Generated Presentation:</h3>
            <div id="presentation-maker-response" class="ai-generated-content"></div>
        </div>
    </div>

    <div id="concept-explainer-page" class="page"> <!-- Renamed from -screen to -page -->
         <div class="header"><button class="back-button" onclick="showScreen('ai-home-screen')">‚Üê</button><h1>AI Concept Explainer</h1></div>
        <div>
            <input id="concept-input" type="text" class="input-box" placeholder="Koi bhi topic likhein, jaise 'Quantum Physics'">
            <button id="get-explanation-btn" type="button" class="submit-button">Samjhao!</button>
        </div>
        <div id="concept-output-container" class="response-container">
            <h3>Aasan Bhasha Mein:</h3>
            <div id="explainer-response" class="ai-generated-content"></div>
        </div>
    </div>

    <!-- The placeholder divs from the Main App's AI section are now fulfilled by the specific pages above -->
    <!-- E.g., <div id="ai-concept-explainer-screen" class="page"></div> is now the content in id="concept-explainer-page" -->
    <!-- No need for separate empty divs now. -->


    <!-- ======================================================= -->
    <!-- External Libraries JS (Combined and placed before main script) -->
    <!-- ======================================================= -->

    <!-- Firebase SDKs (v8 - from AI App HTML, ensure only one set loaded) -->
    <!-- These need to be loaded *before* New File.js initializes Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

    <!-- Libraries from AI App -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Libraries from Main App -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>


    <!-- ======================================================= -->
    <!-- Your Custom JavaScript File -->
    <!-- ‚úÖ‚úÖ‚úÖ ‡§Ø‡§π‡•Ä ‡§µ‡•ã ‡§´‡§º‡§æ‡§á‡§≤ ‡§π‡•à ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§Ö‡§¨ ‡§∏‡§æ‡§∞‡§æ Frontend JS ‡§ï‡•ã‡§° ‡§π‡•ã‡§ó‡§æ ‚úÖ‚úÖ‚úÖ -->
    <!-- AI App ‡§ï‡§æ script_v2.js ‡§ï‡§æ ‡§∏‡§æ‡§∞‡§æ ‡§ï‡•ã‡§° ‡§á‡§∏ ‡§´‡§º‡§æ‡§á‡§≤ ‡§Æ‡•á‡§Ç ‡§Æ‡§∞‡•ç‡§ú ‡§π‡•ã‡§ó‡§æ‡•§ -->
    <!-- ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç: ‡§Ø‡§π Main App ‡§ï‡•Ä ‡§§‡§∞‡§π 'module' ‡§ï‡•á ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ -->
    <!-- ======================================================= -->
    <script type="module" src="New File.js"></script>


</body>
</html>
